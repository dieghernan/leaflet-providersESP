---
layout: compress
title: Leaflet-providersESP visor de mapas
---
<!doctype html>
<html lang="{{- site.locale | default: 'en-US' -}}">
	{%- include fullmap_head.html -%}
	<!-- Display map full page -->
	<style>
		html {
			height: 100%;
			-moz-box-sizing: border-box;
			-webkit-box-sizing: border-box;
			box-sizing: border-box;
			vertical-align: baseline;
		}
		body, #container { height: 100%; margin: 0; padding: 0;}
		#map { height: 100%; width: 100%; }
	</style>
	<!-- Easy Button -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
		<script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>

        <!-- Load Esri Leaflet from CDN -->
        <script src="https://unpkg.com/esri-leaflet@2.5.1/dist/esri-leaflet.js" integrity="sha512-q7X96AASUF0hol5Ih7AeZpRF6smJS55lcvy+GLWzJfZN+31/BQ8cgNx2FGF+IQSA4z2jHwB20vml+drmooqzzQ==" crossorigin=""></script>
        <!-- Load Esri Leaflet Geocoder from CDN -->
        <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.3.3/dist/esri-leaflet-geocoder.css" integrity="sha512-IM3Hs+feyi40yZhDH6kV8vQMg4Fh20s9OzInIIAc4nx7aMYMfo+IenRUekoYsHZqGkREUgx0VvlEsgm7nCDW9g==" crossorigin="" />
        <script src="https://unpkg.com/esri-leaflet-geocoder@2.3.3/dist/esri-leaflet-geocoder.js" integrity="sha512-HrFUyCEtIpxZloTgEKKMq4RFYhxjJkCiF5sDxuAokklOeZ68U2NPfh4MFtyIVWlsKtVbK5GD2/JzFyAfvT5ejA==" crossorigin=""></script>
        <script src="../js/shared.js"></script>
</head>
<body>
<!-- Create map -->
	<div id="map"></div>
        <script>
            var map = L.map("map", {
                center: [40.4166, -3.70384],
                zoomControl: true,
                zoom: 5,
            });
            

            // collect all layers available in the provider definition
            var baseLayers = {};
            var overlays = {};
            var addLayer = function (name) {
                if (isIgnored(name)) {
                    return;
                }
                var layer = L.tileLayer.providerESP(name);
                if (isOverlay(name, layer)) {
                    overlays[name] = layer;
                } else {
                    baseLayers[name] = layer;
                }
            };
            L.tileLayer.providerESP.eachLayer(addLayer);
            // add minimap control to the map
            var layersControl = L.control
                .layers(baseLayers, overlays, {
                    collapsed: true,
                })
                .addTo(map);

            baseLayers[Object.keys(baseLayers)[0]].addTo(map);
            map.locate({ setView: true, maxZoom: 16 });

            function onLocationFound(e) {
                var radius = e.accuracy * 2;
            }

            map.on("locationfound", onLocationFound);

            function onLocationError(e) {
                alert(e.message);
            }

            map.on("locationerror", onLocationError);

            L.easyButton('<i class="fas fa-crosshairs"></i>',
            function () {
                map.locate({ setView: true, maxZoom: 16 });
                map.on("locationfound", onLocationFound);
            }).addTo(map);
            
            L.easyButton('<i class="fas fa-border-style"></i>',
            function(){ map.setView([40,-3],5);}).addTo(map);

            L.easyButton('<i class="fas fa-dove"></i>', 
            function ()
            {
                map.setView([28, -15.8], 6);
            }).addTo(map);
            
            L.easyButton('<i class="fas fa-globe"></i>', function () {
                map.setView([40, -3], 2);
            }).addTo(map);
            
 
            // create the geocoding control and add it to the map
            var searchControl = L.esri.Geocoding.geosearch().addTo(map);
            var results = L.layerGroup().addTo(map);
            
            searchControl.on("results", function (data) {
                results.clearLayers();
                for (var i = data.results.length - 1; i >= 0; i--) {
                    results.addLayer(L.marker(data.results[i].latlng));
                }
            });
            L.easyButton('<i class="fas fa-chevron-circle-left"></i>', function(){
              window.location.href = "https://dieghernan.github.io/leaflet-providersESP/";
              }).addTo(map);

        </script>
    </body>
</html>
